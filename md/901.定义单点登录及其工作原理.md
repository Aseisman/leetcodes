# Problem: 定义单点登录及其工作原理

*[interview]: start
- 定义： 一种身份验证机制，允许用户通过一次登录验证 即可 访问多个应用程序或服务。
- example: 在同一帐号平台下的多个应用系统中，用户只需登录一次，即可访问所有相互信任的系统。

- 实现方式：
1. 基于cookie + redis实现：登录后返回cookie，用户访问时会带上cookie，验证通过即可；
2. 页面重定向：父应用提供一个get接口，用户通过子应用重定向到get接口，返回token的同时，重定向到子应用的验证token接口。（不用人为操作）
3. token：登录之后返回一个token，要访问其他项目时，带上token去访问。
4. 分布式session方式： 登录时，将用户id作为key，存入分布式session，再次登陆时去判断有没有；

- 好处： 提高用户体验（不用多次登录） 安全性提高，简化流程利于架构演进。

- 和单设备登录的区别：

单设备登录： 同一用户只能在一台设备上进行登录。
单点登录：用户一次登录验证后，在其他子应用程序中无须登录。

原理：
单设备登录：使用redis存储，用户id为key，token为value，并设置过期时间存入redis;
           若用户的请求解析时发现token不一致，那么就将redis对应用户id的token重置，过期时间重置。并告诉前一个用户，账号在别处登录。


*[interview]: end
